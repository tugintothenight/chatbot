{% extends 'admin/adminBase.html' %}

{% load static %}

{% block title %}admin/file{% endblock %}

{% block content %}
    <div class="pagetitle">
      <h1>Quản lý file tải lên</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Quản lý file</a></li>
          <li class="breadcrumb-item active">quản lý upload</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section">
      <div class="row">
        <div class="col-lg-12">

          <div class="card">
            <div class="card-body">
              <h3 class="card-title"><b>Danh sách file</b></h3>
			  <div style="display: flex; justify-content: flex-start; padding-left: 20px;">
				<div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
					<button type="button" id="addb" class="btn btn-success" ><i class="bi bi-plus-lg"></i></button>
					<p> tải file lên </p>
				</div>
			  </div>
			  <div class="card">
            <div class="card-body row hide" id="addf" >
              <h5 class="card-title">upload file</h5>

              <!-- Vertical Form -->
                <form  method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="col-12">
                  <label for="file-input" class="form-label">Chọn file:</label>
                   <input type="file" id="file-input" name="document" accept="application/pdf">
                </div>
                <div class="col-12">
                  <label for="text-input" class="form-label">chú thích</label>
                  <input type="text" id="text-input" name="description">
                </div>


                
                <div class="text-center">
                  <button type="submit" class="btn btn-primary">Upload</button>
                  
                </div>
              </form><!-- Vertical Form -->

            </div>
          </div>
              <!-- Table with stripped rows -->
              <table class="table datatable">
                <thead>
                  <tr>
					<th>ID</th>

                    <th>File</th>
                    <th>Ngày upload</th>
                    <th>Note</th>
                    <th>hành động</th>
                  </tr>
                </thead>
                <tbody>
                {% for obj in documents %}
                    <tr>
                        <td>{{ obj.id }}</td>
                        <td><a href="{{ obj.document.url }}">{{ obj.document.name }}</a></td>
                        <td>
                            {{ obj.uploaded_at }}
                        </td>
                        <td>{{ obj.description }}</td>
                        <td>
                            <button type="button" class="btn btn-outline-warning">Sửa</button>
                            <button type="button" class="btn btn-outline-danger">Xoá</button>
                        </td>
                    </tr>
                {% endfor %}


				  
                </tbody>
              </table>
              <!-- End Table with stripped rows -->

            </div>
          </div>

        </div>
      </div>
    </section>

{% endblock %}

{% block js %}
	document.getElementById('addb').addEventListener('click', () => {toggleUpload();});
	function toggleUpload() {
    const addForm = document.getElementById('addf');
    

    if (addForm.classList.contains('hide')) {
        addForm.classList.remove('hide');
   

    } else {
        addForm.classList.add('hide');
       
    }
}
{% endblock %}